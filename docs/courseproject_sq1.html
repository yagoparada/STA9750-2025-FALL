<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.22">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Yago Parada">

<title>Final-Project SQ: How is crime distributed across the NYC subway system, and which stations report the highest number of crimes? â€“ STA 9750 Submission Material</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-cd7454b418030687c631a6a7286fbe16.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-93902a540ec147e97c89cb6c27a8df54.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="site_libs/datatables-binding-0.34.0/datatables.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>


</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">STA 9750 Submission Material</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Project Navigation</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#data-acquisition" id="toc-data-acquisition" class="nav-link" data-scroll-target="#data-acquisition">Data acquisition</a></li>
  <li><a href="#data-preparation-and-limitations" id="toc-data-preparation-and-limitations" class="nav-link" data-scroll-target="#data-preparation-and-limitations">Data Preparation and Limitations</a></li>
  <li><a href="#analysis" id="toc-analysis" class="nav-link" data-scroll-target="#analysis">Analysis</a>
  <ul class="collapse">
  <li><a href="#borough-level" id="toc-borough-level" class="nav-link" data-scroll-target="#borough-level">Borough Level</a></li>
  <li><a href="#station-level" id="toc-station-level" class="nav-link" data-scroll-target="#station-level">Station Level</a>
  <ul class="collapse">
  <li><a href="#manhattan" id="toc-manhattan" class="nav-link" data-scroll-target="#manhattan">Manhattan</a></li>
  <li><a href="#brooklyn" id="toc-brooklyn" class="nav-link" data-scroll-target="#brooklyn">Brooklyn</a></li>
  <li><a href="#bronx" id="toc-bronx" class="nav-link" data-scroll-target="#bronx">Bronx</a></li>
  <li><a href="#queens" id="toc-queens" class="nav-link" data-scroll-target="#queens">Queens</a></li>
  </ul></li>
  <li><a href="#spatial-distribution-of-crime" id="toc-spatial-distribution-of-crime" class="nav-link" data-scroll-target="#spatial-distribution-of-crime">Spatial Distribution of Crime</a></li>
  </ul></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Final-Project SQ: How is crime distributed across the NYC subway system, and which stations report the highest number of crimes?</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Yago Parada </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/courseproject/image.jpg" class="quarto-figure quarto-figure-center figure-img" style="border-radius:20px;" width="750" height="422"></p>
</figure>
</div>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>This analysis is part of a broader project that examines crime in the New York City subway system and addresses the overarching question: Is there a correlation between crimes in the MTA and the stations where they occur? The project is divided into several sub-questions. In this section, we focus on identifying which subway stations report the highest number of crimes in each borough and on examining how crime is distributed across the NYC subway system from 2015 to 2025. By addressing this sub-question and linking it with the others, we aim to gain a better understanding of current crime patterns within the NYC subway network.</p>
</section>
<section id="data-acquisition" class="level1">
<h1>Data acquisition</h1>
<p>For this analysis, we used the NYPD Complaint Data Historic dataset, which is publicly available on NYC Open Data. This dataset contains records of all valid felony, misdemeanor, and violation crimes reported to the NYPD, including details such as the date of the complaint, borough, location coordinates, and subway station when applicable. To acquire the data relevant for this sub-question, we filtered the dataset to include only crimes reported between 2015 and 2025 that occurred in the subway system or were handled by the NY Transit Police. The data was retrieved programmatically using the following R code.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr2)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="fu">file.path</span>(<span class="st">"data"</span>, <span class="st">"courseproject"</span>), <span class="at">showWarnings =</span> <span class="cn">FALSE</span>, <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="do">### NYPD COMPLAINT DATA - HISTORIC</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>url_data_complaint_api <span class="ot">&lt;-</span> <span class="st">"https://data.cityofnewyork.us/resource/qgea-i56i.csv"</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>resp_data_complaint <span class="ot">&lt;-</span> <span class="fu">request</span>(url_data_complaint_api) <span class="sc">|&gt;</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">req_url_query</span>(</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"$select"</span> <span class="ot">=</span> <span class="st">"cmplnt_num, cmplnt_fr_dt, juris_desc, prem_typ_desc, boro_nm, jurisdiction_code, x_coord_cd, y_coord_cd, transit_district, latitude, longitude, lat_lon, station_name, patrol_boro"</span>,</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"$where"</span>  <span class="ot">=</span> <span class="st">"cmplnt_fr_dt between '2015-01-01T00:00:00' and '2025-12-31T23:59:59' AND (juris_desc = 'N.Y. TRANSIT POLICE' OR prem_typ_desc = 'TRANSIT - NYC SUBWAY')"</span>,</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"$limit"</span>  <span class="ot">=</span> <span class="dv">500000</span>) <span class="sc">|&gt;</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">req_progress</span>() <span class="sc">|&gt;</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">req_perform</span>(<span class="at">path =</span> <span class="fu">file.path</span>(<span class="st">"data"</span>, <span class="st">"courseproject"</span>, <span class="st">"nypd_complaint_historic.csv"</span>))</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>complaint_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">file.path</span>(<span class="st">"data"</span>, <span class="st">"courseproject"</span>, <span class="st">"nypd_complaint_historic.csv"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
<section id="data-preparation-and-limitations" class="level1">
<h1>Data Preparation and Limitations</h1>
<p>Once the data was acquired, the next step was to inspect it for potential limitations and determine any necessary preparation or cleaning before starting the analysis. Upon initial examination, the first limitation identified was that there were no recorded subway crime cases for Staten Island. Investigating the full NYPD Complaint Data Historic dataset revealed that crimes in Staten Island may be recorded under Staten Island Rapid Transit rather than N.Y. Transit Police, as is the case for the other boroughs. To account for this, we retrieved the data for Staten Island by adjusting the filter to include Staten Island Rapid Transit and using records from the MTA Police Department:</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="do">## COMPLAINTS DATA</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>filtered_data <span class="ot">&lt;-</span> complaint_df <span class="sc">|&gt;</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(juris_desc <span class="sc">==</span> <span class="st">"N.Y. TRANSIT POLICE"</span> <span class="sc">|</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>           prem_typ_desc <span class="sc">==</span> <span class="st">"TRANSIT - NYC SUBWAY"</span>) <span class="sc">|&gt;</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">between</span>(cmplnt_fr_dt, </span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">as.Date</span>(<span class="st">"2015-01-01"</span>), </span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">as.Date</span>(<span class="st">"2025-12-31"</span>))) </span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="do">### COMPLAINTS IN STATEN ISLAND</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>resp_data_complaint_st <span class="ot">&lt;-</span> <span class="fu">request</span>(url_data_complaint_api) <span class="sc">|&gt;</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">req_url_query</span>(</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"$select"</span> <span class="ot">=</span> <span class="st">"cmplnt_num, cmplnt_fr_dt, juris_desc, prem_typ_desc, boro_nm, jurisdiction_code, x_coord_cd, y_coord_cd, transit_district, latitude, longitude, lat_lon, station_name, patrol_boro"</span>,</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">"$where"</span>  <span class="ot">=</span> <span class="st">"cmplnt_fr_dt between '2015-01-01T00:00:00' and '2025-12-31T23:59:59' AND (juris_desc = 'STATN IS RAPID TRANS' OR juris_desc = 'MTA POLICE DEPT') AND boro_nm = 'STATEN ISLAND'"</span>,</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">"$limit"</span>  <span class="ot">=</span> <span class="dv">500000</span>) <span class="sc">|&gt;</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">req_progress</span>() <span class="sc">|&gt;</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">req_perform</span>(<span class="at">path =</span> <span class="fu">file.path</span>(<span class="st">"data"</span>, <span class="st">"courseproject"</span>, <span class="st">"nypd_complaint_historic_staten_island.csv"</span>))</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>complaint_statent_island_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">file.path</span>(<span class="st">"data"</span>, <span class="st">"courseproject"</span>, <span class="st">"nypd_complaint_historic_staten_island.csv"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Examining the data from Staten Island, it was observed that most station names were missing, and there was no reliable way to ensure that the recorded crimes occurred in the subway system. Furthermore, the total number of crimes during the 10-year period was only 280, which is extremely low compared to the other boroughs As will be shown later, even the borough with the lowest number of crimes during this period, Queens, recorded 14,482 incidents. Therefore, given these limitations and the inability to guarantee that the data represents subway crimes, the team decided to omit Staten Island from the study.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>format_titles <span class="ot">&lt;-</span> <span class="cf">function</span>(df){</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>(df) <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(<span class="fu">colnames</span>(df), <span class="st">"_"</span>, <span class="st">" "</span>) <span class="sc">|&gt;</span> <span class="fu">str_to_title</span>()</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(df)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>complaint_statent_island_df <span class="sc">|&gt;</span> <span class="fu">format_titles</span>() <span class="sc">|&gt;</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">searching =</span> <span class="cn">FALSE</span>,</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">info =</span> <span class="cn">FALSE</span>,</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">pageLength  =</span> <span class="dv">5</span>,</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">columnDefs =</span> <span class="fu">list</span>(<span class="fu">list</span>(<span class="at">className =</span> <span class="st">'dt-center'</span>, <span class="at">targets =</span> <span class="st">'_all'</span>))</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">escape =</span> <span class="cn">FALSE</span>,</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">rownames =</span> <span class="cn">FALSE</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-0ddd1775aaa4853956aa" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-0ddd1775aaa4853956aa">{"x":{"filter":"none","vertical":false,"data":[[298508432,298453345,299023519,298361664,297172727,296863960,295791134,297093367,297536643,295274819,294718883,294246140,293916917,293429867,293292179,292964510,292619191,292468861,292468862,292468860,293865169,291961644,290632804,291664202,290177841,289912049,289811953,291240944,288440207,287914116,287210766,288329512,286211608,285593579,285468090,285335321,285223402,285141019,284867362,284612458,284328064,288001320,283956519,283682983,283448284,283323797,282454217,282083553,281883735,281822870,281486633,281448259,288032908,280690833,279912004,279873125,279825652,279403600,278722956,278722957,278343359,278307379,278214065,277182326,276645271,276595938,276391677,276069177,277544563,274378953,274799481,273429722,273368214,271909061,272990217,269898196,269788088,268460544,269481543,267883224,268685022,276047960,276047958,276047959,267051868,265203090,252210626,252160351,252087308,246146491,244284839,244240711,242454767,242452790,242521371,241106410,241106420,249050645,240882927,240676516,240476009,239612197,239612196,239029559,235812502,230163755,229858650,227236607,226562993,225502338,222075385,218641200,217918286,216983328,216854640,216271539,216271540,212338108,211218510,209912012,209882901,209357912,206871125,206047206,205024722,205024714,204929447,203221138,203223861,201324330,200380278,200298419,200255824,199837927,199836635,199110267,198603385,197657415,196908265,196566830,195621024,194941216,194111785,194001354,193370685,193372060,189516789,189429094,189429096,187411472,184091159,183733554,182661744,182568758,182446665,178557776,178131599,178369804,175370536,174660320,174061335,173889719,173852360,172675623,171838219,171685967,170926781,170633942,168850950,168319616,168259500,168258236,167546458,167289499,167236625,168639427,168178000,166210804,166204697,166145345,165715445,165578692,165478069,165342446,164835725,164472834,164322426,163678564,163445401,163304502,163194475,162913509,162834997,161913091,161640765,161143908,160437624,160240559,159765693,158997436,158997431,158887491,158885673,158425503,158291669,158196688,157992959,157805099,157800929,157406586,157173026,156774821,156361821,155905305,155530353,155531624,155324394,155209746,153947163,153526982,153425466,153425461,152679753,152537699,152406454,152311691,152232387,151515605,151145845,150693204,150693202,150435164,150435160,150435161,150251539,150251538,149899162,149899164,149864259,149506849,149522926,149522925,149506848,148512092,148467996,148291055,148291050,148291057,148227070,148227073,148108028,148017749,147853923,146956541,146915778,146915777,146683953,146581948,146077151,145002246,144866421,144764359,143814032,143421372,143250223,142890125,142814181,142742475,142742473,142742470,142742474,142585953,142581225,142228950,142158998,141493352,141258002,140675784,140675785,140530201],["2024-12-27T00:00:00Z","2024-12-25T00:00:00Z","2024-12-24T00:00:00Z","2024-12-22T00:00:00Z","2024-11-27T00:00:00Z","2024-11-20T00:00:00Z","2024-10-25T00:00:00Z","2024-10-29T00:00:00Z","2024-10-23T00:00:00Z","2024-10-22T00:00:00Z","2024-10-11T00:00:00Z","2024-10-02T00:00:00Z","2024-09-26T00:00:00Z","2024-09-17T00:00:00Z","2024-09-14T00:00:00Z","2024-09-08T00:00:00Z","2024-09-02T00:00:00Z","2024-08-21T00:00:00Z","2024-08-21T00:00:00Z","2024-08-21T00:00:00Z","2024-08-19T00:00:00Z","2024-08-19T00:00:00Z","2024-07-25T00:00:00Z","2024-07-24T00:00:00Z","2024-07-16T00:00:00Z","2024-07-11T00:00:00Z","2024-07-08T00:00:00Z","2024-07-05T00:00:00Z","2024-06-04T00:00:00Z","2024-06-03T00:00:00Z","2024-05-11T00:00:00Z","2024-05-11T00:00:00Z","2024-05-01T00:00:00Z","2024-04-19T00:00:00Z","2024-04-16T00:00:00Z","2024-04-15T00:00:00Z","2024-04-12T00:00:00Z","2024-03-28T00:00:00Z","2024-04-05T00:00:00Z","2024-04-01T00:00:00Z","2024-03-10T00:00:00Z","2023-12-29T00:00:00Z","2024-03-19T00:00:00Z","2024-03-13T00:00:00Z","2024-03-09T00:00:00Z","2024-03-06T00:00:00Z","2024-02-19T00:00:00Z","2024-02-12T00:00:00Z","2023-11-28T00:00:00Z","2023-10-14T00:00:00Z","2023-09-01T00:00:00Z","2024-01-31T00:00:00Z","2024-01-18T00:00:00Z","2024-01-17T00:00:00Z","2024-01-03T00:00:00Z","2023-12-19T00:00:00Z","2024-01-02T00:00:00Z","2023-12-22T00:00:00Z","2023-11-20T00:00:00Z","2023-06-15T00:00:00Z","2023-12-01T00:00:00Z","2023-11-30T00:00:00Z","2023-10-18T00:00:00Z","2023-11-08T00:00:00Z","2023-10-28T00:00:00Z","2023-10-27T00:00:00Z","2023-10-22T00:00:00Z","2023-10-03T00:00:00Z","2023-10-12T00:00:00Z","2023-09-13T00:00:00Z","2023-09-08T00:00:00Z","2023-08-13T00:00:00Z","2023-08-24T00:00:00Z","2023-07-15T00:00:00Z","2022-07-12T00:00:00Z","2022-12-02T00:00:00Z","2023-05-05T00:00:00Z","2023-05-16T00:00:00Z","2023-05-11T00:00:00Z","2023-05-08T00:00:00Z","2023-05-08T00:00:00Z","2023-05-06T00:00:00Z","2023-05-05T00:00:00Z","2023-05-05T00:00:00Z","2023-04-21T00:00:00Z","2023-02-24T00:00:00Z","2022-09-23T00:00:00Z","2022-10-06T00:00:00Z","2022-09-21T00:00:00Z","2022-06-05T00:00:00Z","2022-04-23T00:00:00Z","2022-04-13T00:00:00Z","2022-03-10T00:00:00Z","2022-03-10T00:00:00Z","2022-03-14T00:00:00Z","2022-02-16T00:00:00Z","2022-02-21T00:00:00Z","2022-02-21T00:00:00Z","2022-02-14T00:00:00Z","2022-02-16T00:00:00Z","2022-02-10T00:00:00Z","2022-01-24T00:00:00Z","2022-01-24T00:00:00Z","2021-11-01T00:00:00Z","2021-10-29T00:00:00Z","2021-06-25T00:00:00Z","2021-06-15T00:00:00Z","2021-03-09T00:00:00Z","2021-04-05T00:00:00Z","2021-03-10T00:00:00Z","2020-12-20T00:00:00Z","2020-08-26T00:00:00Z","2020-07-21T00:00:00Z","2020-08-21T00:00:00Z","2020-07-14T00:00:00Z","2020-07-14T00:00:00Z","2020-07-14T00:00:00Z","2020-04-15T00:00:00Z","2020-03-16T00:00:00Z","2020-02-22T00:00:00Z","2020-02-20T00:00:00Z","2020-02-10T00:00:00Z","2019-12-29T00:00:00Z","2019-11-28T00:00:00Z","2019-11-10T00:00:00Z","2019-11-07T00:00:00Z","2019-10-31T00:00:00Z","2019-09-26T00:00:00Z","2019-09-30T00:00:00Z","2019-08-18T00:00:00Z","2019-07-28T00:00:00Z","2019-07-26T00:00:00Z","2019-07-23T00:00:00Z","2019-07-16T00:00:00Z","2019-07-16T00:00:00Z","2019-06-30T00:00:00Z","2019-05-29T00:00:00Z","2019-05-27T00:00:00Z","2019-05-07T00:00:00Z","2019-04-28T00:00:00Z","2019-04-05T00:00:00Z","2019-03-15T00:00:00Z","2019-02-22T00:00:00Z","2019-02-25T00:00:00Z","2019-02-09T00:00:00Z","2019-02-09T00:00:00Z","2018-11-02T00:00:00Z","2018-10-31T00:00:00Z","2018-10-31T00:00:00Z","2018-09-10T00:00:00Z","2018-06-17T00:00:00Z","2018-05-24T00:00:00Z","2018-05-13T00:00:00Z","2018-05-10T00:00:00Z","2018-04-13T00:00:00Z","2018-04-24T00:00:00Z","2018-04-11T00:00:00Z","2018-02-01T00:00:00Z","2018-02-21T00:00:00Z","2018-02-12T00:00:00Z","2018-01-11T00:00:00Z","2018-01-03T00:00:00Z","2018-01-20T00:00:00Z","2017-12-16T00:00:00Z","2017-10-25T00:00:00Z","2017-11-16T00:00:00Z","2017-10-25T00:00:00Z","2017-10-18T00:00:00Z","2017-09-06T00:00:00Z","2017-08-18T00:00:00Z","2017-08-17T00:00:00Z","2017-08-18T00:00:00Z","2017-07-26T00:00:00Z","2017-07-21T00:00:00Z","2017-07-18T00:00:00Z","2017-07-13T00:00:00Z","2017-07-11T00:00:00Z","2017-06-19T00:00:00Z","2017-06-19T00:00:00Z","2017-06-16T00:00:00Z","2017-06-11T00:00:00Z","2017-06-06T00:00:00Z","2017-06-04T00:00:00Z","2017-03-23T00:00:00Z","2016-12-26T00:00:00Z","2017-03-23T00:00:00Z","2017-04-18T00:00:00Z","2017-04-10T00:00:00Z","2016-07-07T00:00:00Z","2017-03-23T00:00:00Z","2017-03-27T00:00:00Z","2017-03-18T00:00:00Z","2017-03-15T00:00:00Z","2017-02-13T00:00:00Z","2017-02-05T00:00:00Z","2017-01-27T00:00:00Z","2017-01-18T00:00:00Z","2017-01-12T00:00:00Z","2016-12-29T00:00:00Z","2016-11-23T00:00:00Z","2016-10-28T00:00:00Z","2016-10-25T00:00:00Z","2016-11-29T00:00:00Z","2016-11-12T00:00:00Z","2016-11-07T00:00:00Z","2016-11-03T00:00:00Z","2016-10-27T00:00:00Z","2016-10-21T00:00:00Z","2016-10-21T00:00:00Z","2016-10-07T00:00:00Z","2016-08-12T00:00:00Z","2016-09-15T00:00:00Z","2016-08-31T00:00:00Z","2016-07-26T00:00:00Z","2016-07-07T00:00:00Z","2016-07-22T00:00:00Z","2016-07-29T00:00:00Z","2016-07-23T00:00:00Z","2016-06-01T00:00:00Z","2016-05-30T00:00:00Z","2016-05-19T00:00:00Z","2016-05-16T00:00:00Z","2016-04-18T00:00:00Z","2016-04-16T00:00:00Z","2016-04-21T00:00:00Z","2016-04-19T00:00:00Z","2016-04-04T00:00:00Z","2016-03-24T00:00:00Z","2016-01-08T00:00:00Z","2016-02-20T00:00:00Z","2016-02-20T00:00:00Z","2016-02-13T00:00:00Z","2016-02-13T00:00:00Z","2016-02-13T00:00:00Z","2016-02-04T00:00:00Z","2016-02-04T00:00:00Z","2016-01-16T00:00:00Z","2016-01-16T00:00:00Z","2016-01-20T00:00:00Z","2016-01-08T00:00:00Z","2016-01-19T00:00:00Z","2016-01-19T00:00:00Z","2016-01-08T00:00:00Z","2015-12-13T00:00:00Z","2015-12-10T00:00:00Z","2015-11-28T00:00:00Z","2015-11-24T00:00:00Z","2015-11-28T00:00:00Z","2015-11-20T00:00:00Z","2015-11-24T00:00:00Z","2015-11-06T00:00:00Z","2015-11-22T00:00:00Z","2015-09-21T00:00:00Z","2015-10-10T00:00:00Z","2015-10-06T00:00:00Z","2015-10-03T00:00:00Z","2015-10-05T00:00:00Z","2015-10-01T00:00:00Z","2015-08-27T00:00:00Z","2015-08-02T00:00:00Z","2015-07-24T00:00:00Z","2015-07-23T00:00:00Z","2015-06-12T00:00:00Z","2015-05-30T00:00:00Z","2015-05-27T00:00:00Z","2015-05-06T00:00:00Z","2015-05-11T00:00:00Z","2015-05-01T00:00:00Z","2015-04-30T00:00:00Z","2015-04-30T00:00:00Z","2015-04-30T00:00:00Z","2015-04-16T00:00:00Z","2015-04-25T00:00:00Z","2015-04-17T00:00:00Z","2015-01-25T00:00:00Z","2015-02-14T00:00:00Z","2015-03-04T00:00:00Z","2015-01-22T00:00:00Z","2015-01-22T00:00:00Z","2015-01-13T00:00:00Z"],["MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","MTA POLICE DEPT","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS","STATN IS RAPID TRANS"],["TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","STREET","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","PARKING LOT/GARAGE (PRIVATE)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","RESIDENCE-HOUSE","(null)","TRANSIT FACILITY (OTHER)","(null)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","STREET","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","BUS STOP","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","(null)","RESIDENCE-HOUSE","TRANSIT FACILITY (OTHER)","(null)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","DRUG STORE","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","STREET","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","PUBLIC SCHOOL","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","OTHER","OTHER","OTHER","(null)","OTHER","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","OTHER","OTHER","OTHER","OTHER","TRANSIT FACILITY (OTHER)","OTHER","OTHER","OTHER","OTHER","OTHER","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","COMMERCIAL BUILDING","OTHER","OTHER","OTHER","OTHER","TRANSIT FACILITY (OTHER)","FACTORY/WAREHOUSE","OTHER","OTHER","TRANSIT FACILITY (OTHER)","OTHER","OTHER","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","OTHER","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","FERRY/FERRY TERMINAL","TRANSIT FACILITY (OTHER)","OTHER","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","OTHER","OTHER","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","OTHER","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","OTHER","OPEN AREAS (OPEN LOTS)","FERRY/FERRY TERMINAL","FERRY/FERRY TERMINAL","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","FERRY/FERRY TERMINAL","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","OTHER","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","STREET","OTHER","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","STREET","TRANSIT FACILITY (OTHER)","COMMERCIAL BUILDING","OTHER","OTHER","TRANSIT FACILITY (OTHER)","STREET","TRANSIT FACILITY (OTHER)","STREET","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","STREET","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","STREET","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","OTHER","OTHER","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","PUBLIC BUILDING","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","OTHER","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","OTHER","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","OTHER","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","OTHER","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","OTHER","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","OTHER","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","OTHER","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","COMMERCIAL BUILDING","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","OTHER","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)","TRANSIT FACILITY (OTHER)"],["STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND","STATEN ISLAND"],[17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],[963495,959889,963409,964047,963772,963495,946548,938359,963409,963713,951883,916532,963713,963713,951883,948969,963495,951883,954262,948969,934959,942426,963495,930816,962873,963495,963225,963409,938359,914042,930816,942426,943878,955738,948969,963199,963713,930816,963713,963713,917335,942426,942426,963713,960677,963495,963713,964289,942426,948969,963772,964289,930816,951883,963713,948969,953756,942426,924059,924059,963713,957491,963409,963495,938021,964289,916899,963409,964508,961575,914042,962873,937470,963713,948969,962873,949426,942426,920258,963409,963713,930816,942426,946548,942520,954943,956007,930816,930816,960978,941778,942389,954164,956007,964289,948906,939882,938359,945195,948906,938281,951835,951835,930816,942426,951221,954943,957176,951132,960978,934761,955780,957796,948906,957147,960978,960978,955780,960978,963713,917335,930646,938594,963713,961126,959731,914159,951516,960978,957050,952718,963306,928381,954827,942424,946451,945195,949111,938594,934968,963353,948906,954164,914159,964047,964047,942164,942462,942462,963713,948906,960978,945826,951835,956007,963024,942273,957796,959885,926744,959885,951835,949032,928449,961126,937288,961126,955699,913979,960595,942462,960595,951835,942462,959731,954029,954029,962869,917370,957635,920498,948906,942426,960978,934968,960978,923994,954943,959731,960978,942462,942426,917370,934968,949032,963845,938281,963713,963817,960978,949032,942462,963713,914725,961052,964334,938451,963845,962896,963845,949032,960401,962896,938281,959731,959731,946273,960978,938281,942462,959731,949032,964334,959731,963239,963772,942331,962748,959731,948221,960978,949032,946451,938281,960978,951835,938281,949032,916092,959885,946451,946451,959731,913681,914725,952158,960978,949032,955699,960978,959731,930949,938594,960978,949032,938281,914159,942462,960978,961380,951835,938504,938281,960978,963199,963199,942164,942462,959731,960978,955699,951835,938281,964114,959731,948906,950051,951835,949032,914803],[171652,156431,167801,173812,166550,171652,142070,137551,167801,173753,148443,127280,173753,173753,148443,144992,171652,148443,150235,144992,136306,140283,171652,133437,174172,171652,158111,167801,137551,125825,133437,140283,143850,152102,144992,170974,173753,133437,173753,173753,127835,140283,140283,173753,158307,171652,173753,165772,140283,144992,166550,165772,133437,148443,173753,144992,147132,140283,129805,129805,173753,153761,167801,171652,142659,165772,127643,167801,165397,157458,125825,174172,143629,173753,144992,174172,156038,140283,128878,167801,173753,133437,140283,142070,139972,148360,152455,133437,133437,159398,139701,140403,150674,152455,165772,145040,138897,137551,141160,145040,137671,148480,148480,133437,140283,147898,148360,153260,147621,159398,164620,152066,153854,145040,153693,159398,159398,152066,159398,173753,127835,133878,137271,173753,159125,156448,125680,148178,159398,153340,149096,171409,130763,148519,140292,142170,141160,145261,137271,136245,171648,145040,150674,125680,173812,173812,140007,140163,140163,173753,145040,159398,142050,148480,152455,168281,139816,153854,156432,132960,156432,148480,144944,130621,159125,151471,159125,152142,125404,156855,140163,156855,148480,140163,156448,150400,150400,173170,127981,153962,128804,145040,140283,159398,136245,159398,129663,148360,156448,159398,140163,140283,127981,136245,144944,171682,137671,173753,171156,159398,144944,140163,173753,125836,159261,165699,137441,171682,171647,171682,144944,156387,171647,137671,156448,156448,141994,159398,137671,140163,156448,144944,165699,156448,167978,166550,139679,174173,156448,143912,159398,144944,142170,137671,159398,148480,137671,144944,127042,156432,142170,142170,156448,124063,125836,148572,159398,144944,152142,159398,156448,133127,137271,159398,144944,137671,125680,140163,159398,171117,148480,138187,137671,159398,170974,170974,140007,140163,156448,159398,152142,148480,137671,166065,156448,145040,146226,148480,144944,125922],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[40.637807,40.596019,40.627236,40.643737,40.623796,40.637799,40.556545,40.544105,40.627228,40.643566,40.57406,40.51577085574103,40.643566,40.643566,40.57406,40.564575,40.637799,40.57406,40.578987,40.564575,40.540667,40.551623,40.637799,40.53277,40.6447209438691,40.637799,40.600631,40.627228,40.544105,40.51176,40.53277,40.551623,40.561421,40.584117,40.564575,40.63593566195261,40.643566,40.53277,40.643566,40.643566,40.517302,40.551623,40.551623,40.643566,40.601164,40.637799,40.643566,40.62166,40.551623,40.564575,40.623796,40.62166,40.53277,40.57406,40.643566,40.564575,40.57046680281875,40.551623,40.522758,40.522758,40.643566,40.588676,40.627228,40.637799,40.558121,40.62166,40.516772,40.627228,40.620633,40.598833,40.51176,40.6447209438691,40.560784,40.643566,40.564575,40.6447209438691,40.594898,40.551623,40.520186,40.627228,40.643566,40.53277,40.551623,40.556545,40.55076824,40.57384997,40.58508483,40.53277,40.53277,40.6041564,40.55002088,40.55195064,40.58019028,40.58508483,40.62166,40.56470666,40.54780477,40.544105,40.55404125,40.56470666,40.54443149,40.57415998,40.57415998,40.53277,40.551623,40.57256024,40.57384997,40.58729804,40.571801,40.6041564,40.618383,40.58401638,40.58893032,40.56470666,40.58848645,40.6041564,40.6041564,40.58401638,40.6041564,40.643566,40.517302,40.53398,40.54333518,40.643566,40.60340746,40.59605589,40.51136073,40.57332987,40.6041564,40.58751724,40.57585396,40.637132,40.52541353,40.5742856881925,40.55164613,40.55681895,40.55404125,40.56531408,40.54333518,40.5404996,40.63778601,40.56470666,40.58019028,40.51136073,40.643729,40.643729,40.55086263,40.55129223,40.55129223,40.643566,40.56470666,40.6041564,40.556489,40.57415998,40.58508483,40.62854353,40.550341,40.58893032,40.5960124,40.53143342,40.5960124,40.57415998,40.56444366,40.525027,40.60340746,40.582305,40.60340746,40.58422472,40.51060174,40.597176,40.55129223,40.597176,40.57415998,40.55129223,40.59605589,40.57943774,40.57943774,40.64196241,40.51770132,40.58922628,40.51998332,40.56470666,40.551623,40.6041564,40.5404996,40.6041564,40.52236554,40.57384997,40.59605589,40.6041564,40.55129223,40.551623,40.51770132,40.5404996,40.56444366,40.637882,40.54443149,40.643566,40.636439,40.6041564,40.56444366,40.55129223,40.643566,40.51180398,40.603782,40.62145952,40.54380106,40.637882,40.63778217,40.637882,40.56444366,40.59589029,40.63778217,40.54443149,40.59605589,40.59605589,40.5563351,40.6041564,40.54443149,40.55129223,40.59605589,40.56444366,40.62145952,40.59605589,40.627714,40.623796,40.54996312,40.64472591,40.59605589,40.56160777,40.6041564,40.56444366,40.55681895,40.54443149,40.6041564,40.57415998,40.54443149,40.56444366,40.51511422,40.5960124,40.55681895,40.55681895,40.59605589,40.506919,40.51180398,40.57441367,40.6041564,40.56444366,40.58422472,40.6041564,40.59605589,40.53191806,40.54333518,40.6041564,40.56444366,40.54443149,40.51136073,40.55129223,40.6041564,40.636324,40.57415998,40.54584896,40.54443149,40.6041564,40.63593566,40.63593566,40.55086263,40.55129223,40.59605589,40.6041564,40.58422472,40.57415998,40.54443149,40.62246362,40.59605589,40.56470666,40.56796649,40.57415998,40.56444366,40.5120382535219],[-74.074783,-74.08772,-74.075081,-74.072799,-74.073767,-74.074782,-74.13567500000001,-74.165115,-74.07508,-74.074001,-74.116508,-74.24354901711612,-74.074001,-74.074001,-74.116508,-74.12698,-74.074782,-74.116508,-74.107952,-74.12698,-74.17734,-74.15049999999999,-74.074782,-74.192222,-74.0770327198983,-74.074782,-74.075711,-74.07508,-74.165115,-74.252487,-74.192222,-74.15049999999999,-74.145296,-74.10264599999999,-74.12698,-74.07584654637674,-74.074001,-74.192222,-74.074001,-74.074001,-74.240664,-74.15049999999999,-74.15049999999999,-74.074001,-74.084889,-74.074782,-74.074001,-74.07190300000001,-74.15049999999999,-74.12698,-74.073767,-74.07190300000001,-74.192222,-74.116508,-74.074001,-74.12698,-74.10976191426123,-74.15049999999999,-74.2165,-74.2165,-74.074001,-74.096341,-74.07508,-74.074782,-74.16636699999999,-74.07190300000001,-74.242233,-74.07508,-74.07111399999999,-74.08165,-74.252487,-74.0770327198983,-74.168358,-74.074001,-74.12698,-74.0770327198983,-74.125393,-74.15049999999999,-74.23016200000001,-74.07508,-74.074001,-74.192222,-74.15049999999999,-74.13567500000001,-74.15016119000001,-74.10549598,-74.10168177,-74.192222,-74.192222,-74.08380887,-74.15282949,-74.15063524,-74.1083091,-74.10168177,-74.07190300000001,-74.12720833,-74.15964669,-74.165115,-74.14054235,-74.12720833,-74.16539913,-74.11668293,-74.11668293,-74.192222,-74.15049999999999,-74.11889026999999,-74.10549598,-74.09747631,-74.11920600000001,-74.08380887,-74.178259,-74.10249739,-74.09524641,-74.12720833,-74.09758246,-74.08380887,-74.08380887,-74.10249739,-74.08380887,-74.074001,-74.240664,-74.19284,-74.16427023999999,-74.074001,-74.08327495,-74.08828895000001,-74.25206694000001,-74.11782975,-74.08380887,-74.09793028,-74.11350729999999,-74.07546000000001,-74.20096277,-74.1059144051212,-74.15050861,-74.13602819,-74.14054235,-74.12647165,-74.16427023999999,-74.17730908,-74.07529377,-74.12720833,-74.1083091,-74.25206694000001,-74.07279800000001,-74.07279800000001,-74.15144243,-74.15037107000001,-74.15037107000001,-74.074001,-74.12720833,-74.08380887,-74.13827499999999,-74.11668293,-74.10168177,-74.07646859,-74.15104700000001,-74.09524641,-74.08773437000001,-74.20686976,-74.08773437000001,-74.11668293,-74.12675434000001,-74.200714,-74.08327495,-74.169067,-74.08327495,-74.10278932999999,-74.25271141,-74.085176,-74.15037107000001,-74.085176,-74.11668293,-74.15037107000001,-74.08828895000001,-74.10879387,-74.10879387,-74.07704249,-74.24054207,-74.09582650999999,-74.22929963999999,-74.12720833,-74.15049999999999,-74.08380887,-74.17730908,-74.08380887,-74.21673311000001,-74.10549598,-74.08828895000001,-74.08380887,-74.15037107000001,-74.15049999999999,-74.24054207,-74.17730908,-74.12675434000001,-74.07351800000001,-74.16539913,-74.074001,-74.073617,-74.08380887,-74.12675434000001,-74.15037107000001,-74.074001,-74.25003445999999,-74.08354,-74.07174157999999,-74.16478591000001,-74.07351800000001,-74.07694038,-74.07351800000001,-74.12675434000001,-74.08587618,-74.07694038,-74.16539913,-74.08828895000001,-74.08828895000001,-74.13666777,-74.08380887,-74.16539913,-74.15037107000001,-74.08828895000001,-74.12675434000001,-74.07174157999999,-74.08828895000001,-74.075692,-74.073767,-74.15083946999999,-74.07748282999999,-74.08828895000001,-74.12966772999999,-74.08380887,-74.12675434000001,-74.13602819,-74.16539913,-74.08380887,-74.11668293,-74.16539913,-74.12675434000001,-74.24512908,-74.08773437000001,-74.13602819,-74.13602819,-74.08828895000001,-74.253766,-74.25003445999999,-74.11552067,-74.08380887,-74.12675434000001,-74.10278932999999,-74.08380887,-74.08828895000001,-74.19174423,-74.16427023999999,-74.08380887,-74.12675434000001,-74.16539913,-74.25206694000001,-74.15037107000001,-74.08380887,-74.08240000000001,-74.11668293,-74.16460026,-74.16539913,-74.08380887,-74.07584654,-74.07584654,-74.15144243,-74.15037107000001,-74.08828895000001,-74.08380887,-74.10278932999999,-74.11668293,-74.16539913,-74.07253516,-74.08828895000001,-74.12720833,-74.12309331,-74.11668293,-74.12675434000001,-74.2497549524458],["(40.637807, -74.074783)","(40.596019, -74.08772)","(40.627236, -74.075081)","(40.643737, -74.072799)","(40.623796, -74.073767)","(40.637799, -74.074782)","(40.556545, -74.135675)","(40.544105, -74.165115)","(40.627228, -74.07508)","(40.643566, -74.074001)","(40.57406, -74.116508)","(40.51577085574103, -74.24354901711612)","(40.643566, -74.074001)","(40.643566, -74.074001)","(40.57406, -74.116508)","(40.564575, -74.12698)","(40.637799, -74.074782)","(40.57406, -74.116508)","(40.578987, -74.107952)","(40.564575, -74.12698)","(40.540667, -74.17734)","(40.551623, -74.1505)","(40.637799, -74.074782)","(40.53277, -74.192222)","(40.6447209438691, -74.0770327198983)","(40.637799, -74.074782)","(40.600631, -74.075711)","(40.627228, -74.07508)","(40.544105, -74.165115)","(40.51176, -74.252487)","(40.53277, -74.192222)","(40.551623, -74.1505)","(40.561421, -74.145296)","(40.584117, -74.102646)","(40.564575, -74.12698)","(40.63593566195261, -74.07584654637674)","(40.643566, -74.074001)","(40.53277, -74.192222)","(40.643566, -74.074001)","(40.643566, -74.074001)","(40.517302, -74.240664)","(40.551623, -74.1505)","(40.551623, -74.1505)","(40.643566, -74.074001)","(40.601164, -74.084889)","(40.637799, -74.074782)","(40.643566, -74.074001)","(40.62166, -74.071903)","(40.551623, -74.1505)","(40.564575, -74.12698)","(40.623796, -74.073767)","(40.62166, -74.071903)","(40.53277, -74.192222)","(40.57406, -74.116508)","(40.643566, -74.074001)","(40.564575, -74.12698)","(40.57046680281875, -74.10976191426123)","(40.551623, -74.1505)","(40.522758, -74.2165)","(40.522758, -74.2165)","(40.643566, -74.074001)","(40.588676, -74.096341)","(40.627228, -74.07508)","(40.637799, -74.074782)","(40.558121, -74.166367)","(40.62166, -74.071903)","(40.516772, -74.242233)","(40.627228, -74.07508)","(40.620633, -74.071114)","(40.598833, -74.08165)","(40.51176, -74.252487)","(40.6447209438691, -74.0770327198983)","(40.560784, -74.168358)","(40.643566, -74.074001)","(40.564575, -74.12698)","(40.6447209438691, -74.0770327198983)","(40.594898, -74.125393)","(40.551623, -74.1505)","(40.520186, -74.230162)","(40.627228, -74.07508)","(40.643566, -74.074001)","(40.53277, -74.192222)","(40.551623, -74.1505)","(40.556545, -74.135675)","(40.55076824, -74.15016119)","(40.57384997, -74.10549598)","(40.58508483, -74.10168177)","(40.53277, -74.192222)","(40.53277, -74.192222)","(40.6041564, -74.08380887)","(40.55002088, -74.15282949)","(40.55195064, -74.15063524)","(40.58019028, -74.1083091)","(40.58508483, -74.10168177)","(40.62166, -74.071903)","(40.56470666, -74.12720833)","(40.54780477, -74.15964669)","(40.544105, -74.165115)","(40.55404125, -74.14054235)","(40.56470666, -74.12720833)","(40.54443149, -74.16539913)","(40.57415998, -74.11668293)","(40.57415998, -74.11668293)","(40.53277, -74.192222)","(40.551623, -74.1505)","(40.57256024, -74.11889027)","(40.57384997, -74.10549598)","(40.58729804, -74.09747631)","(40.571801, -74.119206)","(40.6041564, -74.08380887)","(40.618383, -74.178259)","(40.58401638, -74.10249739)","(40.58893032, -74.09524641)","(40.56470666, -74.12720833)","(40.58848645, -74.09758246)","(40.6041564, -74.08380887)","(40.6041564, -74.08380887)","(40.58401638, -74.10249739)","(40.6041564, -74.08380887)","(40.643566, -74.074001)","(40.517302, -74.240664)","(40.53398, -74.19284)","(40.54333518, -74.16427024)","(40.643566, -74.074001)","(40.60340746, -74.08327495)","(40.59605589, -74.08828895)","(40.51136073, -74.25206694)","(40.57332987, -74.11782975)","(40.6041564, -74.08380887)","(40.58751724, -74.09793028)","(40.57585396, -74.1135073)","(40.637132, -74.07546)","(40.52541353, -74.20096277)","(40.5742856881925, -74.1059144051212)","(40.55164613, -74.15050861)","(40.55681895, -74.13602819)","(40.55404125, -74.14054235)","(40.56531408, -74.12647165)","(40.54333518, -74.16427024)","(40.5404996, -74.17730908)","(40.63778601, -74.07529377)","(40.56470666, -74.12720833)","(40.58019028, -74.1083091)","(40.51136073, -74.25206694)","(40.643729, -74.072798)","(40.643729, -74.072798)","(40.55086263, -74.15144243)","(40.55129223, -74.15037107)","(40.55129223, -74.15037107)","(40.643566, -74.074001)","(40.56470666, -74.12720833)","(40.6041564, -74.08380887)","(40.556489, -74.138275)","(40.57415998, -74.11668293)","(40.58508483, -74.10168177)","(40.62854353, -74.07646859)","(40.550341, -74.151047)","(40.58893032, -74.09524641)","(40.5960124, -74.08773437)","(40.53143342, -74.20686976)","(40.5960124, -74.08773437)","(40.57415998, -74.11668293)","(40.56444366, -74.12675434)","(40.525027, -74.200714)","(40.60340746, -74.08327495)","(40.582305, -74.169067)","(40.60340746, -74.08327495)","(40.58422472, -74.10278933)","(40.51060174, -74.25271141)","(40.597176, -74.085176)","(40.55129223, -74.15037107)","(40.597176, -74.085176)","(40.57415998, -74.11668293)","(40.55129223, -74.15037107)","(40.59605589, -74.08828895)","(40.57943774, -74.10879387)","(40.57943774, -74.10879387)","(40.64196241, -74.07704249)","(40.51770132, -74.24054207)","(40.58922628, -74.09582651)","(40.51998332, -74.22929964)","(40.56470666, -74.12720833)","(40.551623, -74.1505)","(40.6041564, -74.08380887)","(40.5404996, -74.17730908)","(40.6041564, -74.08380887)","(40.52236554, -74.21673311)","(40.57384997, -74.10549598)","(40.59605589, -74.08828895)","(40.6041564, -74.08380887)","(40.55129223, -74.15037107)","(40.551623, -74.1505)","(40.51770132, -74.24054207)","(40.5404996, -74.17730908)","(40.56444366, -74.12675434)","(40.637882, -74.073518)","(40.54443149, -74.16539913)","(40.643566, -74.074001)","(40.636439, -74.073617)","(40.6041564, -74.08380887)","(40.56444366, -74.12675434)","(40.55129223, -74.15037107)","(40.643566, -74.074001)","(40.51180398, -74.25003446)","(40.603782, -74.08354)","(40.62145952, -74.07174158)","(40.54380106, -74.16478591)","(40.637882, -74.073518)","(40.63778217, -74.07694038)","(40.637882, -74.073518)","(40.56444366, -74.12675434)","(40.59589029, -74.08587618)","(40.63778217, -74.07694038)","(40.54443149, -74.16539913)","(40.59605589, -74.08828895)","(40.59605589, -74.08828895)","(40.5563351, -74.13666777)","(40.6041564, -74.08380887)","(40.54443149, -74.16539913)","(40.55129223, -74.15037107)","(40.59605589, -74.08828895)","(40.56444366, -74.12675434)","(40.62145952, -74.07174158)","(40.59605589, -74.08828895)","(40.627714, -74.075692)","(40.623796, -74.073767)","(40.54996312, -74.15083947)","(40.64472591, -74.07748283)","(40.59605589, -74.08828895)","(40.56160777, -74.12966773)","(40.6041564, -74.08380887)","(40.56444366, -74.12675434)","(40.55681895, -74.13602819)","(40.54443149, -74.16539913)","(40.6041564, -74.08380887)","(40.57415998, -74.11668293)","(40.54443149, -74.16539913)","(40.56444366, -74.12675434)","(40.51511422, -74.24512908)","(40.5960124, -74.08773437)","(40.55681895, -74.13602819)","(40.55681895, -74.13602819)","(40.59605589, -74.08828895)","(40.506919, -74.253766)","(40.51180398, -74.25003446)","(40.57441367, -74.11552067)","(40.6041564, -74.08380887)","(40.56444366, -74.12675434)","(40.58422472, -74.10278933)","(40.6041564, -74.08380887)","(40.59605589, -74.08828895)","(40.53191806, -74.19174423)","(40.54333518, -74.16427024)","(40.6041564, -74.08380887)","(40.56444366, -74.12675434)","(40.54443149, -74.16539913)","(40.51136073, -74.25206694)","(40.55129223, -74.15037107)","(40.6041564, -74.08380887)","(40.636324, -74.0824)","(40.57415998, -74.11668293)","(40.54584896, -74.16460026)","(40.54443149, -74.16539913)","(40.6041564, -74.08380887)","(40.63593566, -74.07584654)","(40.63593566, -74.07584654)","(40.55086263, -74.15144243)","(40.55129223, -74.15037107)","(40.59605589, -74.08828895)","(40.6041564, -74.08380887)","(40.58422472, -74.10278933)","(40.57415998, -74.11668293)","(40.54443149, -74.16539913)","(40.62246362, -74.07253516)","(40.59605589, -74.08828895)","(40.56470666, -74.12720833)","(40.56796649, -74.12309331)","(40.57415998, -74.11668293)","(40.56444366, -74.12675434)","(40.5120382535219, -74.2497549524458)"],["(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)"],["PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND","PATROL BORO STATEN ISLAND"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Cmplnt Num<\/th>\n      <th>Cmplnt Fr Dt<\/th>\n      <th>Juris Desc<\/th>\n      <th>Prem Typ Desc<\/th>\n      <th>Boro Nm<\/th>\n      <th>Jurisdiction Code<\/th>\n      <th>X Coord Cd<\/th>\n      <th>Y Coord Cd<\/th>\n      <th>Transit District<\/th>\n      <th>Latitude<\/th>\n      <th>Longitude<\/th>\n      <th>Lat Lon<\/th>\n      <th>Station Name<\/th>\n      <th>Patrol Boro<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"info":false,"pageLength":5,"columnDefs":[{"className":"dt-center","targets":"_all"},{"name":"Cmplnt Num","targets":0},{"name":"Cmplnt Fr Dt","targets":1},{"name":"Juris Desc","targets":2},{"name":"Prem Typ Desc","targets":3},{"name":"Boro Nm","targets":4},{"name":"Jurisdiction Code","targets":5},{"name":"X Coord Cd","targets":6},{"name":"Y Coord Cd","targets":7},{"name":"Transit District","targets":8},{"name":"Latitude","targets":9},{"name":"Longitude","targets":10},{"name":"Lat Lon","targets":11},{"name":"Station Name","targets":12},{"name":"Patrol Boro","targets":13}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><br> Another issue identified in the dataset was that some crime records were missing the train station name. To address this, all null values in the station_name field were filled by matching the longitude, latitude, and borough with other records that had the same coordinates and a valid station name. This approach allowed us to complete the station information for all relevant records, ensuring that the subsequent analysis could correctly associate crimes with the corresponding subway stations.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co"># REPLACING NULL VALUES</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>station_ref <span class="ot">&lt;-</span> filtered_data <span class="sc">|&gt;</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span><span class="fu">is.na</span>(station_name),</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    station_name <span class="sc">!=</span> <span class="st">"(null)"</span>,</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span><span class="fu">is.na</span>(boro_nm),</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    boro_nm <span class="sc">!=</span> <span class="st">"(null)"</span>,</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span><span class="fu">is.na</span>(latitude),</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span><span class="fu">is.na</span>(longitude)</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(latitude, longitude) <span class="sc">|&gt;</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">station_name_ref =</span> <span class="fu">first</span>(station_name),</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">boro_nm_ref =</span> <span class="fu">first</span>(boro_nm),</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>df_borough_complete <span class="ot">&lt;-</span> filtered_data <span class="sc">|&gt;</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>    station_ref,</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"latitude"</span>, <span class="st">"longitude"</span>)</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">station_name =</span> <span class="fu">if_else</span>(</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>      <span class="fu">is.na</span>(station_name) <span class="sc">|</span> station_name <span class="sc">==</span> <span class="st">"(null)"</span>,</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>      station_name_ref,</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>      station_name</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">boro_nm =</span> <span class="fu">if_else</span>(</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>      <span class="fu">is.na</span>(boro_nm) <span class="sc">|</span> boro_nm <span class="sc">==</span> <span class="st">"(null)"</span>,</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>      boro_nm_ref,</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>      boro_nm</span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>station_name_ref, <span class="sc">-</span>boro_nm_ref)</span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>check_na_borough <span class="ot">&lt;-</span> df_borough_complete <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="fu">is.na</span>(boro_nm))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>During the process of replacing null values in the station name column, five observations were identified with missing borough values. Given the small number of affected records, a rule-based approach was applied to assign boroughs using station names, as shown in the code below.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>df_borough_complete <span class="ot">&lt;-</span> df_borough_complete <span class="sc">|&gt;</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">boro_nm =</span> <span class="fu">case_when</span>(</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">is.na</span>(boro_nm) <span class="sc">&amp;</span> station_name <span class="sc">==</span> <span class="st">"GRAND STREET"</span> <span class="sc">~</span> <span class="st">"MANHATTAN"</span>,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">is.na</span>(boro_nm) <span class="sc">&amp;</span> station_name <span class="sc">==</span> <span class="st">"NECK ROAD"</span> <span class="sc">~</span> <span class="st">"BROOKLYN"</span>,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">is.na</span>(boro_nm) <span class="sc">&amp;</span> station_name <span class="sc">==</span> <span class="st">"BEACH 67 STREET"</span> <span class="sc">~</span> <span class="st">"QUEENS"</span>,</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">is.na</span>(boro_nm) <span class="sc">&amp;</span> station_name <span class="sc">==</span> <span class="st">"PELHAM BAY PARK"</span> <span class="sc">~</span> <span class="st">"BRONX"</span>,</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> boro_nm</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>check_na_borough2 <span class="ot">&lt;-</span> df_borough_complete <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="fu">is.na</span>(boro_nm))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
<section id="analysis" class="level1">
<h1>Analysis</h1>
<p>With all the data prepared, we can now proceed with the analysis. The approach used to analyze this sub-question is hierarchical, starting at the borough level and then drilling down to the station level.</p>
<section id="borough-level" class="level2">
<h2 class="anchored" data-anchor-id="borough-level">Borough Level</h2>
<p>First, we aggregated the total number of reported crimes for each borough and calculated the percentage of total crimes that each borough represents. This allows us to identify which boroughs have the highest crime levels in the NYC subway system from 2015 to 2025.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Borough analysis</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>borough_lvl_table <span class="ot">&lt;-</span> df_borough_complete <span class="sc">|&gt;</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(boro_nm) <span class="sc">|&gt;</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n_crimes =</span> <span class="fu">n</span>(),</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">|&gt;</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percentage_total =</span> <span class="fu">percent</span>(n_crimes <span class="sc">/</span> <span class="fu">sum</span>(n_crimes)))</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>borough_lvl_table <span class="sc">|&gt;</span> </span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_crimes =</span> <span class="fu">comma</span>(n_crimes),</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">boro_nm =</span> <span class="fu">str_to_title</span>(<span class="fu">str_to_lower</span>(boro_nm))) <span class="sc">|&gt;</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format_titles</span>() <span class="sc">|&gt;</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">colnames =</span> <span class="fu">c</span>(<span class="st">"Borough"</span> <span class="ot">=</span> <span class="st">"Boro Nm"</span>, <span class="st">"Number Crimes"</span> <span class="ot">=</span> <span class="st">"N Crimes"</span>),</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">searching =</span> <span class="cn">FALSE</span>,</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">paging =</span> <span class="cn">FALSE</span>,</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">info =</span> <span class="cn">FALSE</span>,</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>      <span class="at">pageLength  =</span> <span class="dv">5</span>,</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>      <span class="at">columnDefs =</span> <span class="fu">list</span>(<span class="fu">list</span>(<span class="at">className =</span> <span class="st">'dt-center'</span>, <span class="at">targets =</span> <span class="st">'_all'</span>))</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">escape =</span> <span class="cn">FALSE</span>,</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">rownames =</span> <span class="cn">FALSE</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-85c268b9222665966c7b" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-85c268b9222665966c7b">{"x":{"filter":"none","vertical":false,"data":[["Bronx","Brooklyn","Manhattan","Queens"],["22,517","34,810","56,684","14,482"],["17.5%","27.1%","44.1%","11.3%"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Borough<\/th>\n      <th>Number Crimes<\/th>\n      <th>Percentage Total<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"paging":false,"info":false,"pageLength":5,"columnDefs":[{"className":"dt-center","targets":"_all"},{"name":"Boro Nm","targets":0},{"name":"N Crimes","targets":1},{"name":"Percentage Total","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><br> As shown in the analysis, <span style="color:#0039A6"><strong>Manhattan</strong></span> has the highest number of reported crimes, with <span style="color:#0039A6"><strong>56,684</strong></span>, representing <span style="color:#0039A6"><strong>44.1% of the total crimes</strong></span>. In contrast, <span style="color:#0039A6"><strong>Queens</strong></span> reports <span style="color:#0039A6"><strong>14,482 crimes</strong></span>, which accounts for <span style="color:#0039A6"><strong>11.3% of the total</strong></span>. These results highlight the concentration of subway crime in Manhattan relative to the other boroughs</p>
<p>It is also important to examine the evolution of subway crime over time, particularly across the pre-COVID, during-COVID, and post-COVID periods. Analyzing trends in these periods allows us to observe how crime levels changed in response to major events, such as the COVID-19 pandemic, and to identify whether certain boroughs experienced sharper increases or decreases compared with others.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>borough_lvl_visualization_data <span class="ot">&lt;-</span> df_borough_complete <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">year</span>(cmplnt_fr_dt)) <span class="sc">|&gt;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(boro_nm, </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>           year) <span class="sc">|&gt;</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n_crimes =</span> <span class="fu">n</span>(),</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">|&gt;</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">covid_period =</span> <span class="fu">case_when</span>(</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>      year <span class="sc">&lt;</span> <span class="dv">2020</span> <span class="sc">~</span> <span class="st">"Pre-COVID"</span>,</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>      year <span class="sc">%in%</span> <span class="dv">2020</span><span class="sc">:</span><span class="dv">2021</span> <span class="sc">~</span> <span class="st">"During COVID"</span>,</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>      year <span class="sc">&gt;</span> <span class="dv">2021</span> <span class="sc">~</span> <span class="st">"Post-COVID"</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>covid_labels <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">xmin =</span> <span class="fu">c</span>(<span class="fu">min</span>(borough_lvl_visualization_data<span class="sc">$</span>year), <span class="dv">2020</span>, <span class="dv">2022</span>),</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">xmax =</span> <span class="fu">c</span>(<span class="dv">2019</span>, <span class="dv">2021</span>, <span class="fu">max</span>(borough_lvl_visualization_data<span class="sc">$</span>year)),</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">period =</span> <span class="fu">c</span>(<span class="st">"Pre-COVID"</span>, <span class="st">"During COVID"</span>, <span class="st">"Post-COVID"</span>)</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">x_text =</span> (xmin <span class="sc">+</span> xmax) <span class="sc">/</span> <span class="dv">2</span>  <span class="co"># midpoint for centered label</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>covid_shades <span class="ot">&lt;-</span> covid_labels <span class="sc">|&gt;</span> </span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(period <span class="sc">!=</span> <span class="st">"During COVID"</span>)</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>borough_lvl_visualization <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>( <span class="co"># Shaded rectangles for periods</span></span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> covid_shades,</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">xmin =</span> xmin, <span class="at">xmax =</span> xmax, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>),</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"gray80"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>,</span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">inherit.aes =</span> <span class="cn">FALSE</span></span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>( <span class="co"># Text labels in background for each period</span></span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> covid_labels,</span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> x_text, <span class="at">y =</span> <span class="fu">max</span>(borough_lvl_visualization_data<span class="sc">$</span>n_crimes) <span class="sc">*</span> <span class="fl">0.95</span>, </span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>        <span class="at">label =</span> period),</span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"gray9"</span>,</span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">4</span>,</span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fl">0.8</span>,</span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">fontface =</span> <span class="st">"bold"</span></span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(  <span class="co">#Lines and points per borough</span></span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> borough_lvl_visualization_data,</span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> n_crimes, <span class="at">color =</span> boro_nm),</span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">1</span></span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> borough_lvl_visualization_data,</span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> n_crimes, <span class="at">color =</span> boro_nm)</span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_x_continuous</span>(</span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="fu">min</span>(borough_lvl_visualization_data<span class="sc">$</span>year),</span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">max</span>(borough_lvl_visualization_data<span class="sc">$</span>year), <span class="at">by =</span> <span class="dv">2</span>)</span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Yearly Subway Crimes by Borough"</span>,</span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb7-60"><a href="#cb7-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Number of Crimes"</span>,</span>
<span id="cb7-61"><a href="#cb7-61" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="cn">NULL</span></span>
<span id="cb7-62"><a href="#cb7-62" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb7-63"><a href="#cb7-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb7-64"><a href="#cb7-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb7-65"><a href="#cb7-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb7-66"><a href="#cb7-66" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb7-67"><a href="#cb7-67" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb7-68"><a href="#cb7-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">nrow =</span> <span class="dv">1</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb7-69"><a href="#cb7-69" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-70"><a href="#cb7-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-71"><a href="#cb7-71" aria-hidden="true" tabindex="-1"></a>borough_lvl_visualization</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="courseproject_sq1_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>From the borough-level line chart, crime levels appear relatively stable during the pre-COVID period. As expected, a clear decrease is observed during the COVID years, coinciding with reduced subway usage and mobility restrictions. However, in the post-COVID period, crime levels rebound sharply, reaching new historical highs in several boroughs. In particular, Brooklyn shows a notable change in its trend. Before COVID-19, the number of reported crimes in Brooklyn was approximately half of those recorded in Manhattan. In the post-COVID period, however, crime levels in Brooklyn increased substantially, resulting in figures that are now almost comparable to those of Manhattan</p>
</section>
<section id="station-level" class="level2">
<h2 class="anchored" data-anchor-id="station-level">Station Level</h2>
<p>The next step in the analysis focuses on the station level. First, we identify the subway stations with the highest total number of reported crimes across the entire system. Then, the analysis is conducted separately by borough, examining which stations record the highest crime levels within each borough. Finally, we analyze temporal changes at the station level to identify which stations have experienced the largest increases in reported crime since 2015. Because there were no significant decreases, the analysis focuses only on stations that show large increases within each borough.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Station level</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>station_lvl_table <span class="ot">&lt;-</span> df_borough_complete <span class="sc">|&gt;</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(station_name, boro_nm) <span class="sc">|&gt;</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n_crimes =</span> <span class="fu">n</span>(),</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">|&gt;</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percentage_total =</span> <span class="fu">percent</span>(n_crimes <span class="sc">/</span> <span class="fu">sum</span>(n_crimes), <span class="at">accuracy =</span> <span class="fl">0.01</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n_crimes)) <span class="sc">|&gt;</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span><span class="dv">10</span>)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="do">## Data analyse highest increase/decrease </span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>station_yearly <span class="ot">&lt;-</span> df_borough_complete <span class="sc">|&gt;</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">year</span>(cmplnt_fr_dt)) <span class="sc">|&gt;</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(boro_nm, station_name, year) <span class="sc">|&gt;</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n_crimes =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">|&gt;</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">covid_period =</span> <span class="fu">case_when</span>(</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&lt;</span> <span class="dv">2020</span> <span class="sc">~</span> <span class="st">"Pre-COVID"</span>,</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">%in%</span> <span class="dv">2020</span><span class="sc">:</span><span class="dv">2021</span> <span class="sc">~</span> <span class="st">"During COVID"</span>,</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;</span> <span class="dv">2021</span> <span class="sc">~</span> <span class="st">"Post-COVID"</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>station_trend <span class="ot">&lt;-</span> station_yearly <span class="sc">|&gt;</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(boro_nm, station_name) <span class="sc">|&gt;</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year) <span class="sc">|&gt;</span></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">start_year   =</span> <span class="fu">first</span>(year),</span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">end_year     =</span> <span class="fu">last</span>(year),</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">start_crimes =</span> <span class="fu">first</span>(n_crimes),</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">end_crimes   =</span> <span class="fu">last</span>(n_crimes),</span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">net_change   =</span> end_crimes <span class="sc">-</span> start_crimes,</span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>station_trend <span class="ot">&lt;-</span> station_trend <span class="sc">|&gt;</span> <span class="co"># avoid unstable data</span></span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(start_crimes <span class="sc">&gt;=</span> <span class="dv">5</span> <span class="sc">|</span> end_crimes <span class="sc">&gt;=</span> <span class="dv">5</span>)</span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>top_increase <span class="ot">&lt;-</span> station_trend <span class="sc">|&gt;</span></span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(boro_nm) <span class="sc">|&gt;</span></span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(net_change, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a>top_decrease <span class="ot">&lt;-</span> station_trend <span class="sc">|&gt;</span></span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(boro_nm) <span class="sc">|&gt;</span></span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_min</span>(net_change, <span class="at">n =</span> <span class="dv">1</span>)</span>
<span id="cb8-47"><a href="#cb8-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-48"><a href="#cb8-48" aria-hidden="true" tabindex="-1"></a>highlight_stations <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(top_increase, top_decrease)</span>
<span id="cb8-49"><a href="#cb8-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-50"><a href="#cb8-50" aria-hidden="true" tabindex="-1"></a><span class="do">### horizontal bar chart station lvl table</span></span>
<span id="cb8-51"><a href="#cb8-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-52"><a href="#cb8-52" aria-hidden="true" tabindex="-1"></a>borough_colors <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb8-53"><a href="#cb8-53" aria-hidden="true" tabindex="-1"></a>  <span class="st">"BRONX"</span>     <span class="ot">=</span> <span class="st">"#D95F02"</span>,</span>
<span id="cb8-54"><a href="#cb8-54" aria-hidden="true" tabindex="-1"></a>  <span class="st">"MANHATTAN"</span> <span class="ot">=</span> <span class="st">"#7570B3"</span>)</span>
<span id="cb8-55"><a href="#cb8-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-56"><a href="#cb8-56" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(station_lvl_table,</span>
<span id="cb8-57"><a href="#cb8-57" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(station_name, n_crimes),</span>
<span id="cb8-58"><a href="#cb8-58" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> n_crimes,</span>
<span id="cb8-59"><a href="#cb8-59" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> boro_nm)) <span class="sc">+</span></span>
<span id="cb8-60"><a href="#cb8-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb8-61"><a href="#cb8-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> scales<span class="sc">::</span><span class="fu">comma</span>(n_crimes)),</span>
<span id="cb8-62"><a href="#cb8-62" aria-hidden="true" tabindex="-1"></a>            <span class="at">hjust =</span> <span class="fl">1.10</span>,          </span>
<span id="cb8-63"><a href="#cb8-63" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"white"</span>,</span>
<span id="cb8-64"><a href="#cb8-64" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="fl">3.5</span>) <span class="sc">+</span></span>
<span id="cb8-65"><a href="#cb8-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb8-66"><a href="#cb8-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> borough_colors) <span class="sc">+</span></span>
<span id="cb8-67"><a href="#cb8-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb8-68"><a href="#cb8-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb8-69"><a href="#cb8-69" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Top 10 Stations by Number of Crimes"</span>,</span>
<span id="cb8-70"><a href="#cb8-70" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Station"</span>,</span>
<span id="cb8-71"><a href="#cb8-71" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Number of Crimes"</span>,</span>
<span id="cb8-72"><a href="#cb8-72" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="cn">NULL</span></span>
<span id="cb8-73"><a href="#cb8-73" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb8-74"><a href="#cb8-74" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb8-75"><a href="#cb8-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb8-76"><a href="#cb8-76" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title  =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="dv">0</span>),</span>
<span id="cb8-77"><a href="#cb8-77" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title  =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb8-78"><a href="#cb8-78" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span></span>
<span id="cb8-79"><a href="#cb8-79" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="courseproject_sq1_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Among the top 10 subway stations with the highest number of reported crimes, eight are located in Manhattan and the remaining two are in the Bronx. The station with the highest number of reported crimes is 125 Street, with 4,629 incidents, which represents 3.60% of the total number of crimes recorded during the study period.</p>
<section id="manhattan" class="level3">
<h3 class="anchored" data-anchor-id="manhattan">Manhattan</h3>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="do">## top 5 Manhattan</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>station_lvl_manhattan_table <span class="ot">&lt;-</span> df_borough_complete <span class="sc">|&gt;</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(boro_nm <span class="sc">==</span> <span class="st">"MANHATTAN"</span>) <span class="sc">|&gt;</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(station_name) <span class="sc">|&gt;</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n_crimes =</span> <span class="fu">n</span>(),</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">|&gt;</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percentage_total =</span> <span class="fu">percent</span>(n_crimes <span class="sc">/</span> <span class="fu">sum</span>(n_crimes), <span class="at">accuracy =</span> <span class="fl">0.01</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n_crimes)) <span class="sc">|&gt;</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>station_lvl_manhattan_table <span class="sc">|&gt;</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_crimes =</span> <span class="fu">comma</span>(n_crimes),</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">station_name =</span> <span class="fu">str_to_title</span>(<span class="fu">str_to_lower</span>(station_name))) <span class="sc">|&gt;</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format_titles</span>() <span class="sc">|&gt;</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">colnames =</span> <span class="fu">c</span>(<span class="st">"Number Crimes"</span> <span class="ot">=</span> <span class="st">"N Crimes"</span>),</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">searching =</span> <span class="cn">FALSE</span>,</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>      <span class="at">paging =</span> <span class="cn">FALSE</span>,</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>      <span class="at">info =</span> <span class="cn">FALSE</span>,</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>      <span class="at">pageLength  =</span> <span class="dv">5</span>,</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">columnDefs =</span> <span class="fu">list</span>(<span class="fu">list</span>(<span class="at">className =</span> <span class="st">'dt-center'</span>, <span class="at">targets =</span> <span class="st">'_all'</span>))</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">escape =</span> <span class="cn">FALSE</span>,</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">rownames =</span> <span class="cn">FALSE</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-2e1b4b1c98211110a0ff" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-2e1b4b1c98211110a0ff">{"x":{"filter":"none","vertical":false,"data":[["125 Street","42 St.-Port Authority Bus Term","14 Street","59 St.-Columbus Circle","42 St.-Times Square"],["4,629","3,107","2,883","2,609","2,444"],["8.17%","5.48%","5.09%","4.60%","4.31%"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Station Name<\/th>\n      <th>Number Crimes<\/th>\n      <th>Percentage Total<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"paging":false,"info":false,"pageLength":5,"columnDefs":[{"className":"dt-center","targets":"_all"},{"name":"Station Name","targets":0},{"name":"N Crimes","targets":1},{"name":"Percentage Total","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><br> This table closely mirrors the results observed in the top 10 stations analysis. It shows that a large share of reported subway crime is concentrated in Midtown Manhattan, with four out of the five stations located in this area. This concentration highlights Midtownâ€™s role as a major transportation hub with high passenger volumes, which may contribute to higher reported crime levels compared with other parts of the city.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>stations_highest_increase_manhattan <span class="ot">&lt;-</span> station_yearly <span class="sc">|&gt;</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(boro_nm <span class="sc">==</span> <span class="st">"MANHATTAN"</span>) <span class="sc">|&gt;</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> n_crimes, <span class="at">group =</span> station_name)) <span class="sc">+</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"grey70"</span>, <span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> station_yearly <span class="sc">|&gt;</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">semi_join</span>(top_increase, <span class="at">by =</span> <span class="st">"station_name"</span>) <span class="sc">|&gt;</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(boro_nm <span class="sc">==</span> <span class="st">"MANHATTAN"</span>),</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">color =</span> station_name),</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="fl">1.2</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> station_yearly <span class="sc">|&gt;</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">semi_join</span>(top_increase, <span class="at">by =</span> <span class="st">"station_name"</span>) <span class="sc">|&gt;</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(boro_nm <span class="sc">==</span> <span class="st">"MANHATTAN"</span>),</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">color =</span> station_name),</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">2</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> covid_shades,</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">xmin =</span> xmin, <span class="at">xmax =</span> xmax, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>),</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"gray80"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>,</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">inherit.aes =</span> <span class="cn">FALSE</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> covid_labels,</span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> x_text, <span class="at">y =</span> <span class="fu">max</span>(station_yearly<span class="sc">$</span>n_crimes) <span class="sc">*</span> <span class="fl">0.95</span>, </span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">label =</span> period),</span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>,</span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"gray9"</span>,</span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">4</span>,</span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fl">0.8</span>,</span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">fontface =</span> <span class="st">"bold"</span></span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="fu">min</span>(station_yearly<span class="sc">$</span>year), <span class="fu">max</span>(station_yearly<span class="sc">$</span>year), <span class="at">by =</span> <span class="dv">2</span>)</span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Crime Evolution by Station - Manhattan"</span>,</span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Highlighted stations show the largest increase"</span>,</span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Number of Crimes"</span>,</span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="cn">NULL</span></span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb10-46"><a href="#cb10-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb10-47"><a href="#cb10-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb10-48"><a href="#cb10-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb10-49"><a href="#cb10-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb10-50"><a href="#cb10-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb10-51"><a href="#cb10-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb10-52"><a href="#cb10-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">nrow =</span> <span class="dv">1</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb10-53"><a href="#cb10-53" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb10-54"><a href="#cb10-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-55"><a href="#cb10-55" aria-hidden="true" tabindex="-1"></a>stations_highest_increase_manhattan</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="courseproject_sq1_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>From the chart, we can observe the three stations that experienced the largest increases in reported crime over the study period, indicating locations where subway crime has intensified the most since the beginning of the analysis period.</p>
</section>
<section id="brooklyn" class="level3">
<h3 class="anchored" data-anchor-id="brooklyn">Brooklyn</h3>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="do">## top 5 Brooklyn</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>station_lvl_brooklyn_table <span class="ot">&lt;-</span> df_borough_complete <span class="sc">|&gt;</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(boro_nm <span class="sc">==</span> <span class="st">"BROOKLYN"</span>) <span class="sc">|&gt;</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(station_name) <span class="sc">|&gt;</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n_crimes =</span> <span class="fu">n</span>(),</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">|&gt;</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percentage_total =</span> <span class="fu">percent</span>(n_crimes <span class="sc">/</span> <span class="fu">sum</span>(n_crimes), <span class="at">accuracy =</span> <span class="fl">0.01</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n_crimes)) <span class="sc">|&gt;</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>station_lvl_brooklyn_table <span class="sc">|&gt;</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_crimes =</span> <span class="fu">comma</span>(n_crimes),</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">station_name =</span> <span class="fu">str_to_title</span>(<span class="fu">str_to_lower</span>(station_name))) <span class="sc">|&gt;</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format_titles</span>() <span class="sc">|&gt;</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">colnames =</span> <span class="fu">c</span>(<span class="st">"Number Crimes"</span> <span class="ot">=</span> <span class="st">"N Crimes"</span>),</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">searching =</span> <span class="cn">FALSE</span>,</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>      <span class="at">paging =</span> <span class="cn">FALSE</span>,</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>      <span class="at">info =</span> <span class="cn">FALSE</span>,</span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>      <span class="at">pageLength  =</span> <span class="dv">5</span>,</span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">columnDefs =</span> <span class="fu">list</span>(<span class="fu">list</span>(<span class="at">className =</span> <span class="st">'dt-center'</span>, <span class="at">targets =</span> <span class="st">'_all'</span>))</span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">escape =</span> <span class="cn">FALSE</span>,</span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">rownames =</span> <span class="cn">FALSE</span></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-3ae56cab5851ef41dab3" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-3ae56cab5851ef41dab3">{"x":{"filter":"none","vertical":false,"data":[["Utica Ave.-Crown Heights","Jay Street-Borough Hall","Nostrand Avenue","Broadway-East New York","Broadway-Eastern Pkwy"],["1,440","1,389","1,279","1,268","1,226"],["4.14%","3.99%","3.67%","3.64%","3.52%"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Station Name<\/th>\n      <th>Number Crimes<\/th>\n      <th>Percentage Total<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"paging":false,"info":false,"pageLength":5,"columnDefs":[{"className":"dt-center","targets":"_all"},{"name":"Station Name","targets":0},{"name":"N Crimes","targets":1},{"name":"Percentage Total","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><br> In the case of Brooklyn, the highest concentration of reported crimes is observed at Broadway Junction. In the dataset, this station is recorded under different names, Broadwayâ€“East New York and Broadwayâ€“Eastern Parkway, which together account for 2,494 reported incidents.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>stations_highest_increase_brooklyn <span class="ot">&lt;-</span> station_yearly <span class="sc">|&gt;</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(boro_nm <span class="sc">==</span> <span class="st">"BROOKLYN"</span>) <span class="sc">|&gt;</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> n_crimes, <span class="at">group =</span> station_name)) <span class="sc">+</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"grey70"</span>, <span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> station_yearly <span class="sc">|&gt;</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">semi_join</span>(top_increase, <span class="at">by =</span> <span class="st">"station_name"</span>) <span class="sc">|&gt;</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(boro_nm <span class="sc">==</span> <span class="st">"BROOKLYN"</span>),</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">color =</span> station_name),</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="fl">1.2</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> station_yearly <span class="sc">|&gt;</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">semi_join</span>(top_increase, <span class="at">by =</span> <span class="st">"station_name"</span>) <span class="sc">|&gt;</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(boro_nm <span class="sc">==</span> <span class="st">"BROOKLYN"</span>),</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">color =</span> station_name),</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">2</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> covid_shades,</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">xmin =</span> xmin, <span class="at">xmax =</span> xmax, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>),</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"gray80"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>,</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">inherit.aes =</span> <span class="cn">FALSE</span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> covid_labels,</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> x_text, <span class="at">y =</span> <span class="fu">max</span>(<span class="dv">500</span>) <span class="sc">*</span> <span class="fl">0.86</span>, </span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">label =</span> period),</span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>,</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"gray9"</span>,</span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">4</span>,</span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fl">0.8</span>,</span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">fontface =</span> <span class="st">"bold"</span></span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="fu">min</span>(station_yearly<span class="sc">$</span>year), <span class="fu">max</span>(station_yearly<span class="sc">$</span>year), <span class="at">by =</span> <span class="dv">2</span>)</span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Crime Evolution by Station - BROOKLYN"</span>,</span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Highlighted stations show the largest increase"</span>,</span>
<span id="cb12-42"><a href="#cb12-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb12-43"><a href="#cb12-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Number of Crimes"</span>,</span>
<span id="cb12-44"><a href="#cb12-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="cn">NULL</span></span>
<span id="cb12-45"><a href="#cb12-45" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb12-46"><a href="#cb12-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb12-47"><a href="#cb12-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb12-48"><a href="#cb12-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb12-49"><a href="#cb12-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb12-50"><a href="#cb12-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb12-51"><a href="#cb12-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb12-52"><a href="#cb12-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">nrow =</span> <span class="dv">1</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb12-53"><a href="#cb12-53" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb12-54"><a href="#cb12-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-55"><a href="#cb12-55" aria-hidden="true" tabindex="-1"></a>stations_highest_increase_brooklyn</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="courseproject_sq1_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>From the line chart, we can identify the stations that have experienced the largest increase in the number of reported crimes over the study period.</p>
</section>
<section id="bronx" class="level3">
<h3 class="anchored" data-anchor-id="bronx">Bronx</h3>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="do">## top 5 Bronx</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>station_lvl_bronx_table <span class="ot">&lt;-</span> df_borough_complete <span class="sc">|&gt;</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(boro_nm <span class="sc">==</span> <span class="st">"BRONX"</span>) <span class="sc">|&gt;</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(station_name) <span class="sc">|&gt;</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n_crimes =</span> <span class="fu">n</span>(),</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">|&gt;</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percentage_total =</span> <span class="fu">percent</span>(n_crimes <span class="sc">/</span> <span class="fu">sum</span>(n_crimes), <span class="at">accuracy =</span> <span class="fl">0.01</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n_crimes)) <span class="sc">|&gt;</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>station_lvl_bronx_table <span class="sc">|&gt;</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_crimes =</span> <span class="fu">comma</span>(n_crimes),</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">station_name =</span> <span class="fu">str_to_title</span>(<span class="fu">str_to_lower</span>(station_name))) <span class="sc">|&gt;</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format_titles</span>() <span class="sc">|&gt;</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">colnames =</span> <span class="fu">c</span>(<span class="st">"Number Crimes"</span> <span class="ot">=</span> <span class="st">"N Crimes"</span>),</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">searching =</span> <span class="cn">FALSE</span>,</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>      <span class="at">paging =</span> <span class="cn">FALSE</span>,</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>      <span class="at">info =</span> <span class="cn">FALSE</span>,</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>      <span class="at">pageLength  =</span> <span class="dv">5</span>,</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">columnDefs =</span> <span class="fu">list</span>(<span class="fu">list</span>(<span class="at">className =</span> <span class="st">'dt-center'</span>, <span class="at">targets =</span> <span class="st">'_all'</span>))</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">escape =</span> <span class="cn">FALSE</span>,</span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">rownames =</span> <span class="cn">FALSE</span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-7b35c87de7799906a0b6" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-7b35c87de7799906a0b6">{"x":{"filter":"none","vertical":false,"data":[["161 St.-Yankee Stadium","3 Avenue-149 Street","Fordham Road","149 St.-Grand Concourse","170 Street"],["1,917","1,704","1,226","1,180","1,061"],["8.51%","7.57%","5.44%","5.24%","4.71%"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Station Name<\/th>\n      <th>Number Crimes<\/th>\n      <th>Percentage Total<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"paging":false,"info":false,"pageLength":5,"columnDefs":[{"className":"dt-center","targets":"_all"},{"name":"Station Name","targets":0},{"name":"N Crimes","targets":1},{"name":"Percentage Total","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><br> The station 161 Stâ€“Yankee Stadium records the highest number of reported crimes in the Bronx, with 1,917 incidents, representing 8.51% of the total number of crimes in the borough.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>stations_highest_increase_bronx <span class="ot">&lt;-</span> station_yearly <span class="sc">|&gt;</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(boro_nm <span class="sc">==</span> <span class="st">"BRONX"</span>) <span class="sc">|&gt;</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> n_crimes, <span class="at">group =</span> station_name)) <span class="sc">+</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"grey70"</span>, <span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> station_yearly <span class="sc">|&gt;</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">semi_join</span>(top_increase, <span class="at">by =</span> <span class="st">"station_name"</span>) <span class="sc">|&gt;</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(boro_nm <span class="sc">==</span> <span class="st">"BRONX"</span>),</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">color =</span> station_name),</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="fl">1.2</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> station_yearly <span class="sc">|&gt;</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">semi_join</span>(top_increase, <span class="at">by =</span> <span class="st">"station_name"</span>) <span class="sc">|&gt;</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(boro_nm <span class="sc">==</span> <span class="st">"BRONX"</span>),</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">color =</span> station_name),</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">2</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> covid_shades,</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">xmin =</span> xmin, <span class="at">xmax =</span> xmax, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>),</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"gray80"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>,</span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">inherit.aes =</span> <span class="cn">FALSE</span></span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> covid_labels,</span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> x_text, <span class="at">y =</span> <span class="fu">max</span>(<span class="dv">500</span>) <span class="sc">*</span> <span class="fl">0.90</span>, </span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">label =</span> period),</span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>,</span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"gray9"</span>,</span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">4</span>,</span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fl">0.8</span>,</span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">fontface =</span> <span class="st">"bold"</span></span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="fu">min</span>(station_yearly<span class="sc">$</span>year), <span class="fu">max</span>(station_yearly<span class="sc">$</span>year), <span class="at">by =</span> <span class="dv">2</span>)</span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Crime Evolution by Station - BRONX"</span>,</span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Highlighted stations show the largest increase and decrease"</span>,</span>
<span id="cb14-42"><a href="#cb14-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb14-43"><a href="#cb14-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Number of Crimes"</span>,</span>
<span id="cb14-44"><a href="#cb14-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="cn">NULL</span></span>
<span id="cb14-45"><a href="#cb14-45" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb14-46"><a href="#cb14-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb14-47"><a href="#cb14-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb14-48"><a href="#cb14-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb14-49"><a href="#cb14-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb14-50"><a href="#cb14-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb14-51"><a href="#cb14-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb14-52"><a href="#cb14-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">nrow =</span> <span class="dv">1</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb14-53"><a href="#cb14-53" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb14-54"><a href="#cb14-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-55"><a href="#cb14-55" aria-hidden="true" tabindex="-1"></a>stations_highest_increase_bronx</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="courseproject_sq1_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>As observed in the previous crime evolution chart, reported subway crime increases sharply in the post-COVID period. Notably, one of the stations with the largest increase in crimes between 2015 and 2025 is 161 Stâ€“Yankee Stadium, which is also the station with the highest total number of reported crimes in the Bronx.</p>
</section>
<section id="queens" class="level3">
<h3 class="anchored" data-anchor-id="queens">Queens</h3>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="do">## top 5 Queens</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>station_lvl_queens_table <span class="ot">&lt;-</span> df_borough_complete <span class="sc">|&gt;</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(boro_nm <span class="sc">==</span> <span class="st">"QUEENS"</span>) <span class="sc">|&gt;</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(station_name) <span class="sc">|&gt;</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n_crimes =</span> <span class="fu">n</span>(),</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">|&gt;</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percentage_total =</span> <span class="fu">percent</span>(n_crimes <span class="sc">/</span> <span class="fu">sum</span>(n_crimes), <span class="at">accuracy =</span> <span class="fl">0.01</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n_crimes)) <span class="sc">|&gt;</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>station_lvl_queens_table <span class="sc">|&gt;</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_crimes =</span> <span class="fu">comma</span>(n_crimes),</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">station_name =</span> <span class="fu">str_to_title</span>(<span class="fu">str_to_lower</span>(station_name))) <span class="sc">|&gt;</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format_titles</span>() <span class="sc">|&gt;</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">colnames =</span> <span class="fu">c</span>(<span class="st">"Number Crimes"</span> <span class="ot">=</span> <span class="st">"N Crimes"</span>),</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">searching =</span> <span class="cn">FALSE</span>,</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>      <span class="at">paging =</span> <span class="cn">FALSE</span>,</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>      <span class="at">info =</span> <span class="cn">FALSE</span>,</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>      <span class="at">pageLength  =</span> <span class="dv">5</span>,</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">columnDefs =</span> <span class="fu">list</span>(<span class="fu">list</span>(<span class="at">className =</span> <span class="st">'dt-center'</span>, <span class="at">targets =</span> <span class="st">'_all'</span>))</span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">escape =</span> <span class="cn">FALSE</span>,</span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">rownames =</span> <span class="cn">FALSE</span></span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-bc71dbf458499a6496ea" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-bc71dbf458499a6496ea">{"x":{"filter":"none","vertical":false,"data":[["Parsons/Archer-Jamaica Center","Roosevelt Ave.-Jackson Heights","Main St.-Flushing","Sutphin Blvd.-Archer Ave.","74 St.-Broadway"],["943","909","729","620","572"],["6.51%","6.28%","5.03%","4.28%","3.95%"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Station Name<\/th>\n      <th>Number Crimes<\/th>\n      <th>Percentage Total<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"paging":false,"info":false,"pageLength":5,"columnDefs":[{"className":"dt-center","targets":"_all"},{"name":"Station Name","targets":0},{"name":"N Crimes","targets":1},{"name":"Percentage Total","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><br> In Queens, the Parsons/Archerâ€“Jamaica Center station has the highest number of reported crimes, with 943 incidents, followed closely by the Roosevelt Ave.â€“Jackson Heights station, which recorded 909 incidents.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>stations_highest_increase_queens <span class="ot">&lt;-</span> station_yearly <span class="sc">|&gt;</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(boro_nm <span class="sc">==</span> <span class="st">"QUEENS"</span>) <span class="sc">|&gt;</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> n_crimes, <span class="at">group =</span> station_name)) <span class="sc">+</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"grey70"</span>, <span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> station_yearly <span class="sc">|&gt;</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">semi_join</span>(top_increase, <span class="at">by =</span> <span class="st">"station_name"</span>) <span class="sc">|&gt;</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(boro_nm <span class="sc">==</span> <span class="st">"QUEENS"</span>),</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">color =</span> station_name),</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="fl">1.2</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> station_yearly <span class="sc">|&gt;</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">semi_join</span>(top_increase, <span class="at">by =</span> <span class="st">"station_name"</span>) <span class="sc">|&gt;</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(boro_nm <span class="sc">==</span> <span class="st">"QUEENS"</span>),</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">color =</span> station_name),</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">2</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> covid_shades,</span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">xmin =</span> xmin, <span class="at">xmax =</span> xmax, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>),</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"gray80"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>,</span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">inherit.aes =</span> <span class="cn">FALSE</span></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> covid_labels,</span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> x_text, <span class="at">y =</span> <span class="fu">max</span>(<span class="dv">350</span>) <span class="sc">*</span> <span class="fl">0.90</span>, </span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">label =</span> period),</span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>,</span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"gray9"</span>,</span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">4</span>,</span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fl">0.8</span>,</span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">fontface =</span> <span class="st">"bold"</span></span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="fu">min</span>(station_yearly<span class="sc">$</span>year), <span class="fu">max</span>(station_yearly<span class="sc">$</span>year), <span class="at">by =</span> <span class="dv">2</span>)</span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb16-39"><a href="#cb16-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb16-40"><a href="#cb16-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Crime Evolution by Station - QUEENS"</span>,</span>
<span id="cb16-41"><a href="#cb16-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Highlighted stations show the largest increase and decrease"</span>,</span>
<span id="cb16-42"><a href="#cb16-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb16-43"><a href="#cb16-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Number of Crimes"</span>,</span>
<span id="cb16-44"><a href="#cb16-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="cn">NULL</span></span>
<span id="cb16-45"><a href="#cb16-45" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb16-46"><a href="#cb16-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb16-47"><a href="#cb16-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb16-48"><a href="#cb16-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb16-49"><a href="#cb16-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb16-50"><a href="#cb16-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb16-51"><a href="#cb16-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb16-52"><a href="#cb16-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">nrow =</span> <span class="dv">1</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb16-53"><a href="#cb16-53" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb16-54"><a href="#cb16-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-55"><a href="#cb16-55" aria-hidden="true" tabindex="-1"></a>stations_highest_increase_queens</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="courseproject_sq1_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>To conclude the station-level analysis, we can identify the station with the highest increase in crime in Queens.</p>
<p>In the following SQs, the rest of the team will attempt to explain these increases, for example by analyzing the relationship between crime and ridership numbers.</p>
</section>
</section>
<section id="spatial-distribution-of-crime" class="level2">
<h2 class="anchored" data-anchor-id="spatial-distribution-of-crime">Spatial Distribution of Crime</h2>
<p>After examining crime trends by borough, identifying high-crime stations, and exploring changes over time, the following map shows how subway crime is distributed across New York City in space. Instead of drawing a dot for every incident, it summarizes where incidents tend to pile up and where they are more spread out.</p>
<p>The colors on the map come from a statistical technique called kernel density estimation. Imagine placing a smooth â€œboxâ€ of height 1 over each crime location, then adding all those boxes together across the map. Where many crimes happen close to each other, the boxes overlap and create a tall â€œhillâ€; where crimes are rare, the surface stays low. The result is a continuous surface of crime density: high values where incidents are tightly clustered, lower values where they are more diffuse.</p>
<p>The legend numbers (for example, 100, 200, or 300) represent the height of that smoothed density surface. A value of 300 does not literally mean â€œ300 crimes at this exact pointâ€; instead, it means that, after smoothing with the boxes, the local concentration of crimes is about three times higher than an area with a value of 100. Moving from blue to green to yellow to red corresponds to increasing local concentration of incidents, even though each color patch covers a geographic area rather than a single station.</p>
<p>Darker or warmer colors (yellow, orange, red) highlight â€œhotspotsâ€ where the kernel combines many nearby incidents into high density. Cooler colors (blue, green) mark areas where crimes are present but less tightly clustered. It is important to note that areas without color do not mean there is no crime; rather, these areas have relatively fewer reported incidents compared to the hotspots, so they appear blank on the map.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggmap)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="do">### POINTS STATIONS</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>station_counts_manhattan_top_3 <span class="ot">&lt;-</span> df_borough_complete <span class="sc">|&gt;</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(boro_nm <span class="sc">==</span> <span class="st">"MANHATTAN"</span>) <span class="sc">|&gt;</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(station_name) <span class="sc">|&gt;</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n_crimes =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">|&gt;</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n_crimes)) <span class="sc">|&gt;</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>station_lvl_manhattan_table_top_3 <span class="ot">&lt;-</span> station_counts_manhattan_top_3 <span class="sc">|&gt;</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>    df_borough_complete <span class="sc">|&gt;</span> </span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(station_name, longitude, latitude) <span class="sc">|&gt;</span> </span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>      <span class="fu">distinct</span>(station_name, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>),</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="st">"station_name"</span></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>station_lvl_brooklynn_table_top_3 <span class="ot">&lt;-</span> df_borough_complete <span class="sc">|&gt;</span></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(boro_nm <span class="sc">==</span> <span class="st">"BROOKLYN"</span>) <span class="sc">|&gt;</span></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(station_name, longitude, latitude) <span class="sc">|&gt;</span></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n_crimes =</span> <span class="fu">n</span>(),</span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n_crimes)) <span class="sc">|&gt;</span></span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>station_lvl_bronx_table_top_3 <span class="ot">&lt;-</span> df_borough_complete <span class="sc">|&gt;</span></span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(boro_nm <span class="sc">==</span> <span class="st">"BRONX"</span>) <span class="sc">|&gt;</span></span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(station_name, longitude, latitude) <span class="sc">|&gt;</span></span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n_crimes =</span> <span class="fu">n</span>(),</span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n_crimes)) <span class="sc">|&gt;</span></span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a>station_lvl_queens_table_top_2 <span class="ot">&lt;-</span> df_borough_complete <span class="sc">|&gt;</span></span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(boro_nm <span class="sc">==</span> <span class="st">"QUEENS"</span>) <span class="sc">|&gt;</span></span>
<span id="cb17-41"><a href="#cb17-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(station_name, longitude, latitude) <span class="sc">|&gt;</span></span>
<span id="cb17-42"><a href="#cb17-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n_crimes =</span> <span class="fu">n</span>(),</span>
<span id="cb17-43"><a href="#cb17-43" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb17-44"><a href="#cb17-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n_crimes)) <span class="sc">|&gt;</span></span>
<span id="cb17-45"><a href="#cb17-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">2</span>)</span>
<span id="cb17-46"><a href="#cb17-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-47"><a href="#cb17-47" aria-hidden="true" tabindex="-1"></a>top_stations_map <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb17-48"><a href="#cb17-48" aria-hidden="true" tabindex="-1"></a>  station_lvl_manhattan_table_top_3,</span>
<span id="cb17-49"><a href="#cb17-49" aria-hidden="true" tabindex="-1"></a>  station_lvl_brooklynn_table_top_3,</span>
<span id="cb17-50"><a href="#cb17-50" aria-hidden="true" tabindex="-1"></a>  station_lvl_bronx_table_top_3,</span>
<span id="cb17-51"><a href="#cb17-51" aria-hidden="true" tabindex="-1"></a>  station_lvl_queens_table_top_2</span>
<span id="cb17-52"><a href="#cb17-52" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb17-53"><a href="#cb17-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-54"><a href="#cb17-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-55"><a href="#cb17-55" aria-hidden="true" tabindex="-1"></a><span class="do">### MAP</span></span>
<span id="cb17-56"><a href="#cb17-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-57"><a href="#cb17-57" aria-hidden="true" tabindex="-1"></a>nyc_bbox <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">left =</span> <span class="sc">-</span><span class="fl">74.07</span>, <span class="at">bottom =</span> <span class="fl">40.56</span>, <span class="at">right =</span> <span class="sc">-</span><span class="fl">73.78</span>, <span class="at">top =</span> <span class="fl">40.90</span>)</span>
<span id="cb17-58"><a href="#cb17-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-59"><a href="#cb17-59" aria-hidden="true" tabindex="-1"></a>nyc_map <span class="ot">&lt;-</span> <span class="fu">get_stadiamap</span>(</span>
<span id="cb17-60"><a href="#cb17-60" aria-hidden="true" tabindex="-1"></a>  <span class="at">bbox =</span> nyc_bbox,</span>
<span id="cb17-61"><a href="#cb17-61" aria-hidden="true" tabindex="-1"></a>  <span class="at">zoom =</span> <span class="dv">12</span>,</span>
<span id="cb17-62"><a href="#cb17-62" aria-hidden="true" tabindex="-1"></a>  <span class="at">maptype =</span> <span class="st">"stamen_toner_lite"</span>  <span class="co"># light, Google Mapsâ€“like look</span></span>
<span id="cb17-63"><a href="#cb17-63" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb17-64"><a href="#cb17-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-65"><a href="#cb17-65" aria-hidden="true" tabindex="-1"></a>crime_coords <span class="ot">&lt;-</span> df_borough_complete <span class="sc">|&gt;</span></span>
<span id="cb17-66"><a href="#cb17-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(latitude), <span class="sc">!</span><span class="fu">is.na</span>(longitude)) <span class="sc">|&gt;</span></span>
<span id="cb17-67"><a href="#cb17-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(longitude, latitude)</span>
<span id="cb17-68"><a href="#cb17-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-69"><a href="#cb17-69" aria-hidden="true" tabindex="-1"></a>heatmap <span class="ot">&lt;-</span> <span class="fu">ggmap</span>(nyc_map) <span class="sc">+</span></span>
<span id="cb17-70"><a href="#cb17-70" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_density_2d</span>(</span>
<span id="cb17-71"><a href="#cb17-71" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> crime_coords,</span>
<span id="cb17-72"><a href="#cb17-72" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb17-73"><a href="#cb17-73" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> longitude,</span>
<span id="cb17-74"><a href="#cb17-74" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> latitude,</span>
<span id="cb17-75"><a href="#cb17-75" aria-hidden="true" tabindex="-1"></a>      <span class="at">fill =</span> <span class="fu">after_stat</span>(level),</span>
<span id="cb17-76"><a href="#cb17-76" aria-hidden="true" tabindex="-1"></a>      <span class="at">alpha =</span> <span class="fu">after_stat</span>(level)</span>
<span id="cb17-77"><a href="#cb17-77" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb17-78"><a href="#cb17-78" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">"polygon"</span>,</span>
<span id="cb17-79"><a href="#cb17-79" aria-hidden="true" tabindex="-1"></a>    <span class="at">bins =</span> <span class="dv">50</span></span>
<span id="cb17-80"><a href="#cb17-80" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb17-81"><a href="#cb17-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb17-82"><a href="#cb17-82" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> top_stations_map,</span>
<span id="cb17-83"><a href="#cb17-83" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> longitude, <span class="at">y =</span> latitude),</span>
<span id="cb17-84"><a href="#cb17-84" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"red"</span>,</span>
<span id="cb17-85"><a href="#cb17-85" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">2</span></span>
<span id="cb17-86"><a href="#cb17-86" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb17-87"><a href="#cb17-87" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb17-88"><a href="#cb17-88" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> top_stations_map,</span>
<span id="cb17-89"><a href="#cb17-89" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> longitude, <span class="at">y =</span> latitude, <span class="at">label =</span> station_name),</span>
<span id="cb17-90"><a href="#cb17-90" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb17-91"><a href="#cb17-91" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">4</span>,</span>
<span id="cb17-92"><a href="#cb17-92" aria-hidden="true" tabindex="-1"></a>    <span class="at">fontface =</span> <span class="st">"bold"</span>,</span>
<span id="cb17-93"><a href="#cb17-93" aria-hidden="true" tabindex="-1"></a>    <span class="at">nudge_y =</span> <span class="fl">0.003</span></span>
<span id="cb17-94"><a href="#cb17-94" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb17-95"><a href="#cb17-95" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradientn</span>(</span>
<span id="cb17-96"><a href="#cb17-96" aria-hidden="true" tabindex="-1"></a>    <span class="at">colours =</span> <span class="fu">rev</span>(<span class="fu">brewer.pal</span>(<span class="dv">10</span>, <span class="st">"Spectral"</span>)),</span>
<span id="cb17-97"><a href="#cb17-97" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Relative Crime Density"</span></span>
<span id="cb17-98"><a href="#cb17-98" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb17-99"><a href="#cb17-99" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_alpha</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="fl">0.2</span>, <span class="fl">0.8</span>)) <span class="sc">+</span></span>
<span id="cb17-100"><a href="#cb17-100" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_colorbar</span>(<span class="at">barwidth =</span> <span class="fl">0.4</span>, <span class="at">barheight =</span> <span class="dv">5</span>),</span>
<span id="cb17-101"><a href="#cb17-101" aria-hidden="true" tabindex="-1"></a>         <span class="at">alpha =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb17-102"><a href="#cb17-102" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb17-103"><a href="#cb17-103" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Background map: Stadia Maps"</span>,</span>
<span id="cb17-104"><a href="#cb17-104" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="cn">NULL</span>, </span>
<span id="cb17-105"><a href="#cb17-105" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="cn">NULL</span></span>
<span id="cb17-106"><a href="#cb17-106" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb17-107"><a href="#cb17-107" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb17-108"><a href="#cb17-108" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb17-109"><a href="#cb17-109" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.85</span>, <span class="fl">0.10</span>),</span>
<span id="cb17-110"><a href="#cb17-110" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="fu">alpha</span>(<span class="st">"white"</span>, <span class="fl">0.6</span>), <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb17-111"><a href="#cb17-111" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">13</span>),</span>
<span id="cb17-112"><a href="#cb17-112" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">13</span>),</span>
<span id="cb17-113"><a href="#cb17-113" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">12</span>,<span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb17-114"><a href="#cb17-114" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>)</span>
<span id="cb17-115"><a href="#cb17-115" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/courseproject/map.png" class="quarto-figure quarto-figure-center figure-img" style="border-radius:20px;" width="550" height="750"></p>
</figure>
</div>
<p>The map allows us to see at a glance the areas with the highest crime density. As observed in the previous analysis, the highest concentration is in Midtown Manhattan. Other areas with relatively high crime density include the southern part of Manhattan, Harlem, the southern Bronx, and midtown Brooklyn, among others.</p>
</section>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>Throughout this study, we analyzed the distribution of subway crime across New York City, focusing on both borough-level and station-level patterns. At the borough level, we observed that Manhattan consistently reports the highest number of crimes, with hotspots in Midtown, southern Manhattan, and Harlem. Other areas with elevated crime include southern Bronx and midtown Brooklyn, though at lower levels.</p>
<p>We also examined crime trends over time at both the borough and station level. Crime levels were relatively stable before COVID, and after the pandemic, they have been increasing, reaching near all-time highs. This analysis also highlights the stations with the highest concentration of incidents.</p>
<p>Finally, the heatmap synthesizes these findings, showing areas where crimes are tightly clustered while reminding us that lighter or blank areas are not crime-free, just less dense. Overall, the analysis demonstrates that subway crime is spatially concentrated, providing insight into which boroughs and stations are most affected.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/courseproject/car_train_pixel.png" class="quarto-figure quarto-figure-center figure-img" style="border-radius:20px;" width="250" height="100"></p>
</figure>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "î§‹";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/yagoparada\.github\.io\/STA9750-2025-FALL\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>